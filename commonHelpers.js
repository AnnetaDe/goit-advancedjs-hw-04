import{a as T,i as $,S as x}from"./assets/vendor-06e2593d.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const H="3024031-50bf2ca6b1e9bc3513f045fb3";async function w(e,t){let r=15;const s=`https://pixabay.com/api/?${new URLSearchParams({key:H,q:e,image_type:"photo",orientation:"horizontal",safesearch:"true",per_page:r,page:t}).toString()}`;return T.get(s)}const O=()=>{var e;(e=document.querySelector(".bottom-scroll"))==null||e.scrollIntoView({behavior:"smooth"})},b=e=>e.map(t=>`
  <li class="gallery-item">
    <div class="img-container">
      <a class="image-link" href="${t.largeImageURL}">
        <img class="image" src="${t.webformatURL}" alt="${t.tags}" />
      </a>
    </div>
    <ul class="under-picture-list">
      <li class="under-picture-info-item">Likes <span class="data-received">${t.likes}</span></li>
      <li class="under-picture-info-item">Views <span class="data-received">${t.views}</span></li>
      <li class="under-picture-info-item">Comments <span class="data-received">${t.comments}</span></li>
      <li class="under-picture-info-item">Downloads <span class="data-received">${t.downloads}</span></li>
    </ul>
  </li>
`).join(""),u=(e,t,r)=>{e.innerHTML="",t.reset(),$.error({message:r,position:"topRight",timeout:2e3})},h=e=>{e.classList.add("is-hidden"),e.replaceWith(e.cloneNode(!0))},P=(e,t)=>{e.classList.remove("is-hidden"),e.innerHTML=`<span class="load-more-text">${t}</span>`},S=e=>{e.classList.add("is-visible")},f=e=>{e.classList.remove("is-visible")},M=(e,t="topRight",r=5e3)=>{$.show({message:e,position:t,timeout:r})};document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".form"),t=document.querySelector(".gallery"),r=document.querySelector(".loader"),a=document.querySelector(".load-more-images-btn"),s=document.querySelector(".scroll-to-top-btn"),o=document.querySelector("#user-search-input"),n=15;let l=1,y=0,d=0,p=0,m="";const L=new x(".image-link",{captionsData:"alt",captionDelay:250});a.classList.add("is-hidden");const q=async c=>{if(c.preventDefault(),m=c.target.elements.picture_search.value.trim(),l=1,m===""){u(t,e,"Please enter a query.");return}t.innerHTML="",S(r);try{const i=await w(m,l,n);if(f(r),o.value="",i.status!==200||!i.data){u(t,e,"Error fetching images.");return}const g=i.data.hits;if(p=i.data.totalHits,d=i.data.total,y=Math.ceil(p/n),g.length===0){u(t,e,"No images found.");return}if(t.innerHTML=b(g),L.refresh(),p<=n)h(a),M("We're sorry, but you've reached the end of search results.");else{const I=`Load more images ${d-l*n} of ${d}`;P(a,I)}}catch(i){f(r),h(a),u(t,e,"Error fetching images."),console.error(i)}},E=async()=>{l++,S(r);try{const c=await w(m,l,n);if(f(r),c.status!==200||!c.data){u(t,e,"Error fetching images.");return}const i=c.data.hits;t.insertAdjacentHTML("beforeend",b(i)),L.refresh(),O();const v=`Load more images ${d-l*n} of ${d}`;l>=y?(h(a),M("You've reached the end of search results.")):P(a,v)}catch(c){f(r),console.error(c)}};window.addEventListener("scroll",()=>{s.classList.toggle("is-hidden",window.scrollY<=400)}),s.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),e.addEventListener("submit",q),a.addEventListener("click",E)});
//# sourceMappingURL=commonHelpers.js.map
