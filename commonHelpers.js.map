{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js"],"sourcesContent":["export * from \"./pixabay-api.js\";\n\nexport const fetchPhotosByQuery = query => {\n  const API_KEY = \"3024031-50bf2ca6b1e9bc3513f045fb3\";\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: \"true\"\n  });\n  console.log(searchParams.toString());\n  const urlbold = 'https://pixabay.com/api/'\n  // https://pixabay.com/api/?key=3024031-50bf2ca6b1e9bc3513f045fb3&q=yellow+flowers&image_type=photo\n  // https://pixabay.com/api/?key=3024031-50bf2ca6b1e9bc3513f045fb3&query=13&image_type=photo&orientation=horizontal&safesearch=true\n  \n  const baseUrl = `https://pixabay.com/api/?${searchParams.toString()}`;\n  console.log(baseUrl);\n\n  return fetch(baseUrl).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n};\n","export * from \"./render-functions.js\";\n\n// library imports\nimport flatpickr from \"flatpickr\";\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n// function imports\nimport { fetchPhotosByQuery } from \"./pixabay-api.js\";\nimport simpleLightbox from \"simplelightbox\";\nconst searchForm = document.querySelector(\".search-form\");\n\nconst galleryUl = document.querySelector(\".picture-and-data-list\");\nconst loaderEl = document.querySelector(\".loader\");\n\nconst onSearchFormSubmit = event => {\n  event.preventDefault();\n  const query = event.target.elements.picture_search.value.trim();\n\n  if (query === \"\") {\n    galleryUl.innerHTML = \"\";\n    event.target.reset();\n    iziToast.error({\n      title: \"Error\",\n      message: \"Please enter a search query\",\n      position: \"topCenter\"\n    });\n    return;\n  }\n\n  loaderEl.classList.add(\"is-visible\");\n\n  fetchPhotosByQuery(query)\n    .finally(() => {\n        \n      loaderEl.classList.remove(\"is-visible\");\n    })\n    .then(data => {\n      const linksTags = data.hits.map(img => {\n        \n        return {\n          linkWeb: img.webformatURL,\n          linkBig: img.largeImageURL,\n          tags: img.tags,\n          likes: img.likes,\n          views: img.views,\n          comments: img.comments,\n          downloads: img.downloads\n        };\n      });\n\n      function createGalleryItemMarkup({\n        linkWeb,\n        linkBig,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads\n      }) {\n        const galleryItem = `\n   <li class=\"picture-and-data-item\">\n   <div class=\"img-container\">\n            <a  class=\"image-link\" href=\"${linkBig}\"><img class=\"image\" src=\"${linkWeb}\" alt=\"${tags}\" />\n            </div>\n            <ul class=\"under-picture-list\">\n                <li class=\"under-picture-info-item\">Likes <span class=\"data-received\">${likes}</span></li>\n                <li class=\"under-picture-info-item\">Views <span class=\"data-received\">${views}</span></li>\n                <li class=\"under-picture-info-item\">Comments <span class=\"data-received\">${comments}</span></li>\n                <li class=\"under-picture-info-item\">Downloads <span class=\"data-received\">${downloads}</span></li>\n            </ul>\n        </li> \n        </a>`;\n        return galleryItem;\n      }\n\n      galleryUl.innerHTML = \"\";\n      const galleryItemsMarkup = linksTags\n        .map(createGalleryItemMarkup)\n        .join(\"\");\n      galleryUl.insertAdjacentHTML(\"beforeend\", galleryItemsMarkup);\n      searchForm.reset();\n      const lightbox = new SimpleLightbox(\".image-link\", {\n        focus: true,\n        captionsData: \"alt\",\n        captionDelay: 250\n      });\n      lightbox.show();\n      \n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\nsearchForm.addEventListener(\"submit\", onSearchFormSubmit);\n"],"names":["fetchPhotosByQuery","query","API_KEY","searchParams","baseUrl","response","searchForm","galleryUl","loaderEl","onSearchFormSubmit","event","iziToast","data","linksTags","img","createGalleryItemMarkup","linkWeb","linkBig","tags","likes","views","comments","downloads","galleryItemsMarkup","SimpleLightbox","error"],"mappings":"6vBAEO,MAAMA,EAAqBC,GAAS,CACzC,MAAMC,EAAU,oCACVC,EAAe,IAAI,gBAAgB,CACvC,IAAKD,EACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EACD,QAAQ,IAAIE,EAAa,SAAU,CAAA,EAKnC,MAAMC,EAAU,4BAA4BD,EAAa,SAAQ,CAAE,GACnE,eAAQ,IAAIC,CAAO,EAEZ,MAAMA,CAAO,EAAE,KAAKC,GAAY,CACrC,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACH,ECfMC,EAAa,SAAS,cAAc,cAAc,EAElDC,EAAY,SAAS,cAAc,wBAAwB,EAC3DC,EAAW,SAAS,cAAc,SAAS,EAE3CC,EAAqBC,GAAS,CAClCA,EAAM,eAAc,EACpB,MAAMT,EAAQS,EAAM,OAAO,SAAS,eAAe,MAAM,OAEzD,GAAIT,IAAU,GAAI,CAChBM,EAAU,UAAY,GACtBG,EAAM,OAAO,QACbC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACT,SAAU,WAChB,CAAK,EACD,MACD,CAEDH,EAAS,UAAU,IAAI,YAAY,EAEnCR,EAAmBC,CAAK,EACrB,QAAQ,IAAM,CAEbO,EAAS,UAAU,OAAO,YAAY,CAC5C,CAAK,EACA,KAAKI,GAAQ,CACZ,MAAMC,EAAYD,EAAK,KAAK,IAAIE,IAEvB,CACL,QAASA,EAAI,aACb,QAASA,EAAI,cACb,KAAMA,EAAI,KACV,MAAOA,EAAI,MACX,MAAOA,EAAI,MACX,SAAUA,EAAI,SACd,UAAWA,EAAI,SACzB,EACO,EAED,SAASC,EAAwB,CAC/B,QAAAC,EACA,QAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,EAAS,CAcD,MAboB;AAAA;AAAA;AAAA,2CAGeL,CAAO,6BAA6BD,CAAO,UAAUE,CAAI;AAAA;AAAA;AAAA,wFAGZC,CAAK;AAAA,wFACLC,CAAK;AAAA,2FACFC,CAAQ;AAAA,4FACPC,CAAS;AAAA;AAAA;AAAA,aAK9F,CAEDf,EAAU,UAAY,GACtB,MAAMgB,EAAqBV,EACxB,IAAIE,CAAuB,EAC3B,KAAK,EAAE,EACVR,EAAU,mBAAmB,YAAagB,CAAkB,EAC5DjB,EAAW,MAAK,EACC,IAAIkB,EAAe,cAAe,CACjD,MAAO,GACP,aAAc,MACd,aAAc,GACtB,CAAO,EACQ,KAAI,CAEnB,CAAK,EACA,MAAMC,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,CACL,EAEAnB,EAAW,iBAAiB,SAAUG,CAAkB"}